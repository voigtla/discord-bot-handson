了解。
では **第4回の完成版 README.md（このまま配置・配布できる確定稿）**を出します。
※ 余分な設計メモや注釈はすべて落とし、**参加者に渡して破綻しない文面**にしています
※ source（`index.js / db.js / responses.js`）前提で完全に整合しています

---

```md
# 第4回：メンタル系Botの最小構成  
— 運用ルールをコードに落とす —

第4回では、第3回で作成した Bot を  
**メンタル系サーバーの運用ルールに適合する形に整えます。**

この回では、新しい機能は増やしません。  
**「やってよいこと／やってはいけないこと」を、コード構造で固定する回**です。

---

## 🎯 この回のゴール

この回のゴールは、次の1点です。

> **Bot の振る舞いが、運用ルールに照らして安全であると説明できる状態になること**

具体的には：

- Botが判断・断定・助言をしない
- 返答が固定テンプレのみになっている
- 保存するデータが最小限である
- 第3回より構造が整理されている

---

## 📘 前提：開発部運用ルール

この回は、以下の運用ルールを前提としています。

- AIは思考を補助するツールであり、判断主体にならない
- 共感・受容は行うが、評価・指示はしない
- 個人状態の可視化・比較を行わない
- データは最小限のみ扱う

**この回では、これらを「文章」ではなく「実装」で守ります。**

---

## 前提条件

以下を満たしていることを前提に進めます。

- 第3回を完了している
- `/hello` コマンドが動作している
- SQLite にログが保存されている
- `git_practice` フォルダを継続使用している

---

## 今回やらないこと（重要）

この回では、以下は **意図的に行いません**。

- 新しい DB テーブルの追加
- 入力内容の分析・分類
- 感情スコアリング
- LLM / Gemini API の利用
- 危険ワードの自動検知

**理由：**  
「できる」ことよりも  
**「やらないと決める」ことが安全設計だからです。**

---

## 1️⃣ 第3回からの変更点

### 第3回
- 1ファイル構成
- 返信は固定文1種類
- 技術中心の回

### 第4回
- ファイルを分割する
- 返信文をテンプレ化する
- 運用ルール中心の回

**機能は増えていません。構造だけを変えます。**

---

## 2️⃣ 今回の source 構成

```

source/
├─ index.js        # エントリーポイント（つなぐだけ）
├─ db.js           # DB操作（保存のみ）
└─ responses.js    # Botが返してよい文言だけを定義

````

この分割が、第4回の中心テーマです。

---

## 3️⃣ responses.js（重要）

`responses.js` には、  
**Botが返してよい文言だけ**を書きます。

```js
module.exports = {
  normal: "記録しました。教えてくれてありがとう。",
  restricted: "ここでは判断や助言は行いません。",
};
````

### このファイルの役割

* 表現ルールを1か所に集約する
* index.js に自由な文章を書かせない
* レビューしやすくする

👉 **運用ルールをコードで守るための層**です。

---

## 4️⃣ db.js（第3回からの整理）

`db.js` では、
**保存処理だけ**を扱います。

* データ取得はしない
* 集計はしない
* 判断はしない

DBの内容は第3回と同じです。
この回では **整理のみ**行います。

---

## 5️⃣ index.js の役割

`index.js` は、
**処理をつなぐだけ**のファイルです。

* コマンドを受け取る
* DBに保存する
* responses から文を選んで返す

ここに文章を書き始めたら、
この回の目的から外れています。

---

## 6️⃣ Gitでの保存（必須）

この回の変更も、必ず Git に保存します。

```bash
git add .
git commit -m "separate responses and restrict bot behavior"
git push
```

**振る舞いの制限も、コードとして履歴に残します。**

---

## ✅ チェックリスト

* [ ] ファイルが3つに分かれている
* [ ] index.js に文章が書かれていない
* [ ] responses.js に文言が集約されている
* [ ] 保存処理が壊れていない
* [ ] Botが判断・助言をしていない
* [ ] Git に commit されている

すべて満たせば、この回は成功です。

---

## 🚧 よくある詰まりポイント

### ファイル分割の意味が分からない

→ この回では「正解を覚える」必要はありません
→ **役割を分けると安全になる**と分かれば十分です

---

### 返答が地味すぎる気がする

→ **それで正解**です
→ メンタル系Botは「目立たない」ことが価値です

---

### 危険ワードを検知しなくていいの？

→ 過剰反応が事故につながるため
→ この回では **「扱わない」ことを選びます**

---

## 次回予告（第5回）

第5回では、
**保存したデータを「使う」**ことを始めます。

* DBから読み出す
* ただし評価・比較はしない
* 「回数」「期間」など、解釈を伴わない形に留める

運用ルールを守ったまま、
Botに一段だけ意味を持たせます。
